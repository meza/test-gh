{% assign maxSummaryLength = 258 %}
{% assign maxQuoteLength = 130 %}
{% assign maxSnippetLength = 150 %}


{% assign halfSummaryLength = maxSummaryLength|divided_by:2 %}
{% assign halfQuoteLength = maxQuoteLength|divided_by:2 %}
{% assign halfSnippetLength = maxSnippetLength|divided_by:2 %}

{% assign author = site.data.writers[article.author] %}
{% assign pictureSize = 1 %}
{% assign snippetSize = 0 %}
{% assign quoteSize = 0 %}
		<!--author.twitter  author.photo-->
		<!-- The recommendationSize will have an integer to how many columns
		the recommendation text would need -->
{% assign recommendationSize = article.summary|size|divided_by:maxSummaryLength|plus:1 %}
{% assign recommendationHalfSize = article.summary|size|divided_by:halfSummaryLength|plus:1 %}
{% if article.snippet %}
	{% assign snippetSize = article.snippet|size)|divided_by:maxSnippetLength|plus:1 %}
	{% assign snippetHalfSize = article.snippet|size|divided_by:halfSnippetLength|plus:1 %}
	{% assign snippetAndRecommendationFitInOne = true %}
	{% if snippetHalfSize > 1 || recommendationHalfSize > 1 %}
		{% assign snippetAndRecommendationFitInOne = false %}
	{% endif %}
{% endif %}

{% if article.quote %}
	{% assign quoteSize = article.quote|size|divided_by:maxQuoteLength|plus:1 %}
	{% assign quoteHalfSize = article.quote|size|divided_by:halfQuoteLength|plus:1 %}
	{% assign quoteAndRecommendationFitInOne = true %}
	{% if quoteHalfSize > 1 || recommendationHalfSize > 1 %}
		{% assign quoteAndRecommendationFitInOne = false %}
	{% endif %}
{% endif %}

{% assign total = 0 %}
{% if article.picture %}
	{% assign total = total|plus:pictureSize %}
{% endif %}

{% if article.quote == null && article.snippet == null %}
	{% assign total = total|plus:recommendationSize %}
{% endif %}

{% if article.quote %}
	{% if quoteAndRecommendationFitInOne == false %}
		{% if quoteHalfSize > 1 && recommendationHalfSize < 1 %}
			{% assign total = total|plus:quoteSize %}
		{% elsif quoteHalfSize < 1 && recommendationHalfSize > 1 %}
			{% assign total = total|plus:recommendationSize %}
		{% else %}
			{% assign total = total|plus:recommendationSize|plus:quoteSize %}
		{% endif %}
	{% else %}
		{% assign total = total|plus:1 %}
	{% endif %}
{% endif %}



{% if article.snippet %}
	{% if snippetAndRecommendationFitInOne == false %}
		{% if snippetHalfSize > 1 && recommendationHalfSize < 1 %}
			{% assign total = total|plus:snippetSize %}
		{% elsif snippetHalfSize < 1 && recommendationHalfSize > 1 %}
			{% assign total = total|plus:recommendationSize %}
		{% else %}
			{% assign total = total|plus:recommendationSize|plus:snippetSize %}
		{% endif %}
	{% else %}
		{% assign total = total|plus:1 %}
	{% endif %}
{% endif %}

{% if article.picture %}
		<article class="post-box col-{{ total }}">
		<section class="post-picture" style="background-image: url('{{ article.picture }}'); background-size: cover;">
			<!-- <img src="{{ article.picture }}"/><br/> -->
		</section>
{% else %}
	{% if total < 2 %}
		<article class="post-box col-{{ total }}">
	{% else %}
		<article class="post-box col-{{ total }} double-column">
	{% endif %}
{% endif %}

	<section class="post-recommendation">
		<header class="post--header bottom-space">
			<h1 class="title">{{ article.title }}</h1>
		</header>

		<div class="post--category bottom-space">
			<img src="/assets/science.png" title="Category - Science" alt="science" height="14px" width="15px">
		</div>

		{% if article.quote %}
			<blockquote class="post--quote">
				<p>{{ article.quote }}</p>
			</blockquote>
		{% endif %}
		{% if article.snippet %}
			<code class="post--snippet">
				<p>{{ article.snippet }}</p>
			</code>
		{% endif %}

		<div class="post-summary">
			<figure>
				<img src="{{ author.photo }}" height="40" width="40" />
				<figcaption>{{ author.twitter }}</figcaption>
			</figure>
			{{ article.summary }}
		</div>
	</section>

	<footer class="post-button">
			<a href="{{ article.url }}" target="_blank">read article</a>
	</footer>
</article>
